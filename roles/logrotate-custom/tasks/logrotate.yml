---
- name: Logrotate | Install logrotate
  package:
    name: logrotate
    state: present

- name: Creates Independent Folder
  file:
    path: '{{ logrotate_folder_path }}'
    state: directory
- name: Creating Independent Logrotate Setup
  diff: no
  copy:
    dest: '{{ logrotate_folder_path }}/{{ logrotate_file_name }}.conf'
    content: '{{ logrotate_content }}'
- name: Creating Cron to Exec Logrotate Setup
  cron:
    name: 'Execute Logrotate Setup'
    minute: '14'
    job: '/usr/sbin/logrotate {{ logrotate_folder_path }}/{{ logrotate_file_name }}.conf --state {{ logrotate_folder_path }}/logrotate-state'